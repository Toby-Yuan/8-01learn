select語法

// 選擇使用northwind這個資料庫(database)
USE northwind

// 從products資料表(table)選擇全部欄位，*表示全部欄位
SELECT * FROM products

// 可以選擇指定欄位
SELECT ProductID, ProductName FROM products

// WHERE可以篩選出指定欄位的值(篩選條件可以是比較值)
SELECT ProductID, ProductName, UnitPrice, UnitsInStock, UnitsOnOrder, ReorderLevel
FROM products
WHERE UnitsInStock < ReorderLevel;

// WHERE篩選條件裡面可以做數值的相加
SELECT ProductID, ProductName, UnitPrice, UnitsInStock,UnitsOnOrder, ReorderLevel
FROM products
WHERE ( UnitsInStock + UnitsOnOrder ) < ReorderLevel;

// LIKE可以篩選出類似的值，％表示任意長度的字串
SELECT * FROM products
WHERE ProductName LIKE 'c%'

--> 大小寫區分 : LIKE BINARY

// WHERE的篩選條件裡面可以有邏輯運算元，要注意()的順序問題
SELECT ProductID, ProductName, UnitPrice, UnitsInStock,UnitsOnOrder, ReorderLevel
FROM products
WHERE UnitPrice <= 10 or UnitPrice >= 20;

SELECT ProductID, ProductName, UnitPrice, UnitsInStock,UnitsOnOrder, ReorderLevel
FROM products
WHERE not ( UnitPrice <= 10 or UnitPrice >= 20 );

--> UnitPrice > 10 and UnitPrice < 20;

// 區間型條件
SELECT ProductID, ProductName, UnitPrice, UnitsInStock,UnitsOnOrder, ReorderLevel
FROM products
WHERE UnitPrice >= 10 and UnitPrice <= 20;

--> UnitPrice BETWEEN 10 AND 20;

// 列舉型條件
SELECT *
FROM products
WHERE CategoryID IN (1, 4, 8);

// ORDER BY : 排序
SELECT *
FROM products
ORDER BY SupplierID

// NULL : 空白值?? 不知道?? 0??
SELECT companyname, fax
FROM suppliers
WHERE fax IS NULL;

// DISTINCT : 重複的只留一筆
SELECT DISTINCT country
FROM suppliers
ORDER BY country;

// AS : 變更欄位名稱 (list_name) AS (new_list_name)，是更換結果不是過程！！！
SELECT ProductID AS `產品編號`
FROM products;

--> SELECT ProductID `產品名稱`

// CONCAT : 字串相連(數字要經過轉換)
SELECT FirstName, LastName, 
CONCAT('Identification number:', CONVERT(EmployeeID,varchar(2)) ) AS ID
FROM employees;

// LIMIT int : 依照排序取前面幾筆，LIMIT int(a), int(b) : 跳過a筆取b筆
// DESC : 從大到小排列
SELECT ProductID, ProductName, UnitPrice
FROM products
ORDER BY UnitPrice DESC
limit 3;


// 子查詢Subquery
    在query中的query

// 例子 :
SELECT * FROM orders
WHERE OrderDate = 
    (SELECT MAX(OrderDate) FROM orders);

// 課堂範例題目：美商供應的產品清單
-- 起
SELECT * FROM products

-- 承
SELECT ProductID, ProductName,UnitPrice FROM products
WHERE ???
--> 主要目標不是在這個資料表

-- 轉
SELECT * FROM suppliers WHERE country = 'USA'
--> 供應商資料在suppliers資料夾

-- 合
SELECT ProductID, ProductName,UnitPrice FROM products
WHERE SupplierID in (2, 3, 16, 19)

--> 合併，但是太多了
SELECT ProductID, ProductName,UnitPrice FROM products
WHERE SupplierID in (SELECT * FROM suppliers WHERE country = 'USA')

--> 縮減成一欄
SELECT ProductID, ProductName,UnitPrice FROM products
WHERE SupplierID in 
    (SELECT SupplierID FROM suppliers WHERE country = 'USA')